<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content=""><meta name="author" content="Jiang Dequan"><meta name="theme-color" content="#00bcd4"><link rel="icon" href="/favicon/favicon.ico"><link rel="icon" sizes="192x192" href="/images/icon/icon-192x192.png"><link rel="shortcut icon" href="/images/icon/icon-72x72.png"><link rel="apple-touch-icon" href="/images/icon/icon-72x72.png"><link rel="apple-touch-icon" sizes="72x72" href="/images/icon/icon-72x72.png"><link rel="apple-touch-icon" sizes="144x144" href="/images/icon/icon-144x144.png"><link rel="apple-touch-icon" sizes="180x180" href="/images/icon/icon-180x180.png"><title>YouMayCallMeV | A Lost Programmer In The World</title><link href="https://unpkg.com/ionicons@4.4.4/dist/css/ionicons.min.css" rel="stylesheet"><link rel="stylesheet" href="//cdnjs.loli.net/ajax/libs/mdui/0.4.1/css/mdui.min.css"><link rel="stylesheet" href="/css/common.css"><script src="https://cdn.bootcss.com/jquery/2.2.3/jquery.min.js"></script></head><body class="mdui-theme-primary-indigo mdui-theme-accent-indigo mdui-appbar-with-toolbar mdui-drawer-body-right"><div class="simple-appbar mdui-appbar-fixed"><div class="mdui-toolbar mdui-color-indigo"> <a href="javascript:;" class="mdui-btn mdui-btn-icon" id="simple-toggle-menu"><i class="mdui-icon material-icons">&#xe5d2;</i></a> <a href="/" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">&#xe88a;</i></a><div class="mdui-text-center simple-header-title-cls" id="simple-header-title"><small href="javascript:;" class="mdui-typo-title"></small></div><div class="mdui-toolbar-spacer"></div><div class="mdui-textfield mdui-textfield-expandable mdui-float-right simple-searchbar"> <button class="mdui-textfield-icon mdui-btn mdui-btn-icon"> <i class="mdui-icon material-icons">search</i></button> <input class="mdui-textfield-input" type="text" placeholder="Search" id="simple-input-search"> <button class="mdui-textfield-close mdui-btn mdui-btn-icon"> <i class="mdui-icon material-icons">close</i></button></div> <a href="javascript:;" class="mdui-btn mdui-btn-icon simple-header-share"><i class="mdui-icon material-icons">&#xe80d;</i></a></div></div><div class="mdui-card mdui-shadow-12 simple-header-share-pane"><div class="mdui-card-content"><a href="https://twitter.com/intent/tweet?text=Tomcat 中集成 logback&url=https://jiangdequan.github.io/posts/94103dca/&via=https://jiangdequan.github.io/" data-title="分享到Twitter" target="_blank" class="mdui-fab mdui-ripple mdui-color-light-blue mdui-text-center simple-post-share-btn"><i class="fab fa-twitter fa-sm"></i></a><a href="https://www.facebook.com/sharer/sharer.php?u=https://jiangdequan.github.io/posts/94103dca/" alt="分享到FaceBook" target="_blank" class="mdui-fab mdui-ripple mdui-color-indigo mdui-text-center simple-post-share-btn"><i class="fab fa-facebook-f fa-sm"></i></a><a href="https://plus.google.com/share?url=https://jiangdequan.github.io/posts/94103dca/" alt="分享到Google+" target="_blank" class="mdui-fab mdui-ripple mdui-color-deep-orange mdui-text-center simple-post-share-btn"><i class="fab fa-google-plus-g fa-sm"></i></a><br><a href="http://connect.qq.com/widget/shareqq/index.html?url=https://jiangdequan.github.io/posts/94103dca/&title=Tomcat 中集成 logback&source=truncate(strip_html(page.excerpt), { length: 80})" alt="分享到QQ" target="_blank" class="mdui-fab mdui-ripple mdui-color-blue mdui-text-center simple-post-share-btn"><i class="fab fa-qq fa-sm"></i></a><a href="http://service.weibo.com/share/share.php?url=https://jiangdequan.github.io/posts/94103dca/&title=Tomcat 中集成 logback" alt="分享到微博" target="_blank" class="mdui-fab mdui-ripple mdui-color-red mdui-text-center simple-post-share-btn"><i class="fab fa-weibo fa-sm"></i></a><a href="javascript:;" alt="分享到微信" target="_blank" class="mdui-fab mdui-ripple mdui-color-green mdui-text-center simple-post-share-btn"><i class="fab fa-weixin fa-sm"></i></a></div></div><div class="mdui-drawer mdui-drawer-full-height mdui-drawer-close mdui-color-white simple-menu-cls" id="simple-menu"> <a href="https://github.com/jiangdequan/hexo-theme-mdui" title="Fork me on GitHub" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#3f51b5;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style><div class="simple-menu-author"> <a href="/"><img class="mdui-img-circle" src="/images/avatar.png"></a><div class="mdui-typo-title"> Jiang Dequan <a href="/atom.xml" title="RSS"><i class="mdui-icon material-icons">&#xe0e5;</i></a></div><p>jiangdequan1314@gmail.com</p></div><ul class="mdui-list mdui-typo"><li class="mdui-list-item mdui-ripple mdui-valign"> <a href="/"><i class="mdui-list-item-icon mdui-icon material-icons">&#xe88a;</i> <span>&nbsp;&nbsp;Home</span></a></li><li class="mdui-list-item mdui-ripple"> <a href="/archives"><i class="mdui-list-item-icon mdui-icon material-icons">&#xe865;</i> <span>&nbsp;&nbsp;Archives</span></a></li><li class="mdui-list-item mdui-ripple"> <a href="/categories"><i class="mdui-list-item-icon mdui-icon material-icons">&#xe164;</i> <span>&nbsp;&nbsp;Categories</span></a></li><li class="mdui-list-item mdui-ripple"> <a href="/tags"><i class="mdui-list-item-icon mdui-icon material-icons">&#xe54e;</i> <span>&nbsp;&nbsp;Tags</span></a></li><li class="mdui-list-item mdui-ripple"><a href="https://github.com/jiangdequan" target="_blank"><i class="mdui-list-item-icon mdui-icon fab fa-github"></i> <span>&nbsp;&nbsp;GitHub</span></a></li><li class="mdui-list-item mdui-ripple"> <a href="/about"><i class="mdui-list-item-icon mdui-icon material-icons">&#xe87c;</i> <span>&nbsp;&nbsp;About</span></a></li><li class="mdui-list-item mdui-ripple"> <i class="mdui-icon material-icons">&#xe8f4;</i><div class="mdui-list-item-content"><span id="busuanzi_container_site_pv"><span id="busuanzi_value_site_pv"></span></span></div> <i class="mdui-icon material-icons">&#xe851;</i><div class="mdui-list-item-content"><span id="busuanzi_container_site_uv"><span id="busuanzi_value_site_uv"></span></span></div></li><li class="mdui-list-item mdui-ripple"> <i class="mdui-icon material-icons">&#xe02f;</i><div class="mdui-list-item-content"> <span>共 8 篇</span></div> <i class="mdui-icon material-icons">&#xe24b;</i><div class="mdui-list-item-content"> <span>共 8.1k 字</span></div></li></ul></div><div class="mdui-container-fluid"><div class="simple-post-header"></div><div class="mdui-row" style="margin-top:-110px;z-index:9999"><div class="mdui-card mdui-col-md-7 mdui-col-offset-md-1 mdui-col-xs-12 mdui-shadow-12 simple-post-cls" id="simple-post"><div class="mdui-card-content mdui-typo"><h1>Tomcat 中集成 logback</h1> <small class="mdui-typo-body-2-opacity mdui-m-b-1 simple-post-date">2017年09月22日</small><div class="mdui-center mdui-text-center"> <span id="busuanzi_container_page_pv"><del>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</del> 阅读量<span id="busuanzi_value_page_pv"></span> <del>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</del></span></div><br><div class="mdui-m-b-2 simple-content"><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>随着 Tomcat 长时间的运行，在其 logs 下面会产生大量的日志文件，但是 Tomcat 本身并未提供日志清理的功能，在一定时间后会占用一定的系统资源，而且该目录下的日志文件并不是十分重要，所以需要一种机制在一定的时机对日志文件进行管理。<br><a id="more"></a></p><h2 id="方案"><a href="#方案" class="headerlink" title="方案"></a>方案</h2><h3 id="脚本-定时任务"><a href="#脚本-定时任务" class="headerlink" title="脚本 + 定时任务"></a>脚本 + 定时任务</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>!/bin/bash</span><br><span class="line"></span><br><span class="line">echo " " &gt; /data/tomcat/logs/catalina.out</span><br><span class="line">find /the/path/of/logs/ -type f -name "*.log" -mtime +7 -delete</span><br><span class="line">find /the/path/of/logs/ -type f -name "localhost_*.txt" -mtime +7 -delete</span><br></pre></td></tr></table></figure><p>以上是一个简单的 shell 命令，删除7天前的日志文件，将其保存到 clean_tomcat_log.sh，执行 crontab -e 编辑添加该脚本到定时任务。</p><h3 id="logrotate"><a href="#logrotate" class="headerlink" title="logrotate"></a>logrotate</h3><p>Logrotate 是 Linux 自带的一个命令工具，一般的服务器都默认安装有。通过简单的配置就可以实现上述脚本的功能，而且还能够保存分割日志。<br>在 /etc/logrotate.d/ 目录下添加 tomcat-logs 配置文件，文件内容如下：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/the/path/of/logs/*.log /the/path/of/logs/*.txt &#123;</span><br><span class="line">    hourly    --每天执行,可供选择的有weekly,monthly,yearly</span><br><span class="line">　　rotate 0  --不会保留分割的文件,会立即删除</span><br><span class="line">　　missingok  --如果有错误也继续</span><br><span class="line">　　notifempty  --为空则不进行分割</span><br><span class="line">　　copytruncate  --分割时复制原日志内容到新的备份文件中,保持原日志文件继续滚动,由于复制会有一定的时间差,可能会造成部分日志丢失</span><br><span class="line">　　prerotate</span><br><span class="line">　　    find /the/path/of/logs/ -type f -mtime +30 -print -delete;  --删除30天前文件内容有改动的文件</span><br><span class="line">　　endscript</span><br><span class="line">　　postrotate</span><br><span class="line">　　　　find /the/path/of/logs/ -type f -name &quot;*.1&quot; -print -delete;  --删除备份的日志文件</span><br><span class="line">　　endscript</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>以上配置可以简单的实现如何管理日志文件，logrotate 还有其他参数，以上只是一个简单的例子。</p><h3 id="tomcat-slf4j-logback"><a href="#tomcat-slf4j-logback" class="headerlink" title="tomcat-slf4j-logback"></a>tomcat-slf4j-logback</h3><p>该方案通过 Tomcat 结合 logback 可以对 logs 下的日志文件进行管理，这里也推荐使用此方案。</p><ol><li>首先从官网 [1] 下载 Tomcat 对应版本的文件；</li><li>将下载的文件替换到 Tomcat 对应目录下，如果没有其他特殊需求，这样就可以发布项目启动Tomcat了；<br> 复制 bin/tomcat-juli.jar 到 $CATALINA_HOME/bin 替换已有的 tomcat-juli.jar<br> 复制 bin/setenv.sh 或者 bin\setenv.bat 到 $CATALINA_HOME/bin 替换已有的 setenv.sh/setenv.bat 脚本（如果 setenv.sh/setenv.bat 脚本有其他自定义参数的设置则只能在源文件基础上进行修改）<br> 复制 conf/logback.xml 到 $CATALINA_HOME/conf<br> 复制 conf/logback-access.xml 到 $CATALINA_HOME/conf（之前老一点的版本是logback-access-localhost.xml）<br> 复制 conf/server.xml 到 $CATALINA_HOME/conf（如果 server.xml 文件有其他内容修改，则需要在源文件上进行修改）<br> 复制 lib/logback-core-1.1.8.jar，lib/logback-access-1.1.8.jar 到 $CATALINA_HOME/lib（如果发布项目也使用了 logback 需要注意统一版本号，以免造成冲突等问题）</li><li>删除 $CATALINA_HOME/conf/logging.properties 文件。以完全关闭 java.util.logging。</li><li><p>如果需要手动修改 server.xml 则需要按照以下步骤进行修改：<br> 如果需要添加自定义的配置 logback-access-localhost.xml 则要添加如下内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Valve className=&quot;ch.qos.logback.access.tomcat.LogbackValve&quot; quiet=&quot;true&quot; filename=&quot;$&#123;catalina.home&#125;/conf/logback-access-localhost.xml&quot; /&gt;</span><br></pre></td></tr></table></figure><p> PS：如果使用 1.1.7 以上版本的 logback，<code>${catalina.home}</code> 可以去掉<br> 如果使用默认的 logback-access.xml 配置文件则添加如下内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Valve className=&quot;ch.qos.logback.access.tomcat.LogbackValve&quot; quiet=&quot;true&quot; /&gt;</span><br></pre></td></tr></table></figure><p> 删除以下内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; directory=&quot;logs&quot; prefix=&quot;localhost_access_log.&quot; suffix=&quot;.txt&quot; pattern=&quot;%h %l %u %t &amp;quot;%r&amp;quot; %s %b&quot; /&gt;</span><br></pre></td></tr></table></figure></li></ol><p>至此整个配置过程就结束了，接下来就发布项目，启动 Tomcat 进行测试了。其他一些日志的管理只需要修改 conf/ 下的 logback 配置文件即可。</p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p>[1] <a href="https://github.com/tomcat-slf4j-logback/tomcat-slf4j-logback" target="_blank" rel="noopener">tomcat-slf4j-logback</a></p></div><div class="mdui-m-y-5 mdui-typo"><div class="simple-content-end mdui-valign"> 最后修改时间: 2018年11月22日 08:43:41<br> 原始链接:</div></div><div class="mdui-center mdui-text-center simple-post-author"><p> <img class="mdui-img-circle" src="/images/avatar.png"><br> <span class="mdui-typo-title">Jiang Dequan</span><br><br> <button class="mdui-btn mdui-ripple simple-donation-btn" mdui-dialog="{target: '#simple-donation'}"> <i class="mdui-icon mdui-icon-left material-icons">&#xe8dc;</i>稀罕作者</button></p></div><div class="mdui-divider mdui-m-t-5 mdui-m-b-1"></div><div class="mdui-row"><div class="mdui-col-md-1 mdui-col-offset-md-11 mdui-col-xs-1 mdui-col-offset-xs-11 simple-share simple-post-share-detail" style="margin-top:-300px;display:none"><a href="https://twitter.com/intent/tweet?text=Tomcat 中集成 logback&url=https://jiangdequan.github.io/posts/94103dca/&via=https://jiangdequan.github.io/" data-title="分享到Twitter" target="_blank" class="mdui-fab mdui-ripple mdui-color-light-blue mdui-valign mdui-text-center simple-post-share-btn"><i class="fab fa-twitter fa-sm"></i></a><a href="https://www.facebook.com/sharer/sharer.php?u=https://jiangdequan.github.io/posts/94103dca/" alt="分享到FaceBook" target="_blank" class="mdui-fab mdui-ripple mdui-color-indigo mdui-valign mdui-text-center simple-post-share-btn"><i class="fab fa-facebook-f fa-sm"></i></a><a href="https://plus.google.com/share?url=https://jiangdequan.github.io/posts/94103dca/" alt="分享到Google+" target="_blank" class="mdui-fab mdui-ripple mdui-color-deep-orange mdui-valign mdui-text-center simple-post-share-btn"><i class="fab fa-google-plus-g fa-sm"></i></a><a href="http://connect.qq.com/widget/shareqq/index.html?url=https://jiangdequan.github.io/posts/94103dca/&title=Tomcat 中集成 logback&source=truncate(strip_html(page.excerpt), { length: 80})" alt="分享到QQ" target="_blank" class="mdui-fab mdui-ripple mdui-color-blue mdui-valign mdui-text-center simple-post-share-btn"><i class="fab fa-qq fa-sm"></i></a><a href="http://service.weibo.com/share/share.php?url=https://jiangdequan.github.io/posts/94103dca/&title=Tomcat 中集成 logback" alt="分享到微博" target="_blank" class="mdui-fab mdui-ripple mdui-color-red mdui-valign mdui-text-center simple-post-share-btn"><i class="fab fa-weibo fa-sm"></i></a><a href="javascript:;" alt="分享到微信" target="_blank" class="mdui-fab mdui-ripple mdui-color-green mdui-valign mdui-text-center simple-post-share-btn"><i class="fab fa-weixin fa-sm"></i></a></div><div class="mdui-col-md-1 mdui-col-offset-md-11 mdui-col-xs-1 mdui-col-offset-xs-11 simple-share" id="simple-post-share"> <button class="mdui-btn mdui-ripple mdui-fab simple-post-share-btn"> <i class="mdui-icon material-icons mdui-color-theme-accent">&#xe80d;</i></button></div></div><div class="mdui-m-b-1"> <a href="/tags/tomcat/" class="mdui-btn mdui-btn-dense mdui-hoverable mdui-color-green simple-article-tags">tomcat</a> <a href="/tags/logback/" class="mdui-btn mdui-btn-dense mdui-hoverable mdui-color-deep-purple simple-article-tags">logback</a></div></div></div></div><div class="mdui-row mdui-p-y-1"><div class="mdui-col-md-4 mdui-col-offset-md-1 mdui-col-xs-6 mdui-text-left mdui-typo"> <a href="/posts/8b0d9e7/"><label class="label-post-prev">☜</label>什么是微服务？</a></div><div class="mdui-col-md-3 mdui-col-xs-6 mdui-text-right mdui-typo"> <a href="/posts/f05c72d4/">在 Windows 7 下如何删除路径过长的文件？<label class="label-post-next">☞</label></a></div></div><div class="mdui-drawer mdui-drawer-right simple-toc-cls" id="simple-toc"><nav class="post-toc-wrap post-toc-shrink" style="width:240px"><div class="mdui-card mdui-hoverable"><div class="mdui-card-header"><h3><i class="mdui-list-item-icon mdui-icon ion-ios-flame"></i> TOC</h3></div><div class="mdui-card-content" style="height:400px;overflow-y:auto;overflow-x:hidden"><ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#背景"><span class="post-toc-text">背景</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#方案"><span class="post-toc-text">方案</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#脚本-定时任务"><span class="post-toc-text">脚本 + 定时任务</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#logrotate"><span class="post-toc-text">logrotate</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#tomcat-slf4j-logback"><span class="post-toc-text">tomcat-slf4j-logback</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#参考文档"><span class="post-toc-text">参考文档</span></a></li></ol></div></div></nav></div><div class="mdui-dialog simple-donation-cls" id="simple-donation"><div class="mdui-dialog-title">支持一下?</div><div class="mdui-row mdui-m-b-3"><div class="mdui-col-md-12 mdui-text-center"><p id="simple-alipay"> <img src="/images/alipay.jpg"><br> <span class="mdui-typo-title">Alipay 支付宝</span></p><p class="simple-wechat-cls" id="simple-wechat"> <img src="/images/wechat.jpg"><br> <span class="mdui-typo-title">WeChat 微信</span></p></div><div class="mdui-col-md-12 mdui-text-center"> <label class="mdui-switch" id="simple-switch"><input type="checkbox"><i class="mdui-switch-icon"></i></label></div></div></div><div class="mdui-row mdui-p-t-1 mdui-p-b-3"><div class="mdui-col-md-7 mdui-col-offset-md-1 mdui-col-xs-12 mdui-col-offset-xs-0 mdui-shadow-12"><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div id="vcomments"></div><script>new Valine({el:"#vcomments",appId:"MVdi2Xnz6HbmG6W1A7I8CAC8-gzGzoHsz",appKey:"Rl17wHDK3kufdMOx19dojo1h",placeholder:"想对作者说点什么?"})</script></div></div><script src="/js/post.js"></script></div><footer class="footer mdui-color-theme mdui-text-center"><div class="mdui-typo"><p class="simple-footer-license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0)</a></p><p class="simple-footer-copyright"> Jiang Dequan &copy; 2013 - 2019 .Power by <a href="http://hexo.io/" target="_blank"><em>Hexo</em></a> Theme <a href="https://github.com/jiangdequan/hexo-theme-mdui" target="_blank"><em>mdui</em></a></p></div></footer> <button id="simple-scroll-btn" class="mdui-fab mdui-fab-fixed mdui-ripple mdui-fab-mini mdui-color-theme-accent simple-scroll-btn-cls"> <i class="mdui-icon material-icons">&#xe5d8;</i></button><div class="mdui-dialog simple-search-result-cls" id="simple-search-result"><div class="mdui-dialog-content"><div class="mdui-list"></div></div></div><script>$(document).ready(function(){var u,o=new mdui.Dialog("#simple-search-result"),e=algoliasearch("ARMI7PH3RU","6fd6458290f8f2087f2916caba9c8975").initIndex("prod_blog"),h=$("#simple-search-result .mdui-list");$("#simple-input-search").keyup(function(){if(13===event.keyCode){var p=$(this).val();u!==p?(h.empty(),""!==p&&e.search({query:p},function(e,i){if(e)throw e;u=p;var l=i.hits,s=i.nbHits,a=i.processingTimeMS;if(h.append('<label class="mdui-list-item mdui-ripple"><img src="/images/algolia_logo.svg" style="height:18px;"/>&nbsp;&nbsp;  '+s+" results found in "+a+" ms</label>"),null==l||""===l||l.length<1)o.open();else{for(var t=0;t<l.length;t++){var n=l[t].permalink;(n=n.replace("https://jiangdequan.github.io","")).startsWith("/")||(n="/"+n);var r=l[t]._highlightResult.title.value;h.append('<a href="'+n+'" class="mdui-list-item mdui-ripple">'+r+"</a>")}o.open()}})):o.open()}})})</script><script src="//cdnjs.loli.net/ajax/libs/mdui/0.4.1/js/mdui.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script><script src="/modules/algolia/algoliasearchLite.min.js"></script><script src="/js/common.js"></script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?28f09eb40c03df56c14ea1736cf3ec3b";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-127646245-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-127646245-1")</script></body></html>