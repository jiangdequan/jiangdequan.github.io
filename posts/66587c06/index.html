<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content=""><meta name="author" content="Jiang Dequan"><meta name="theme-color" content="#00bcd4"><link rel="icon" href="https://tvax2.sinaimg.cn/large/71d67353ly1gbmsx3kicej200w00w741.jpg"><link rel="icon" sizes="192x192" href="https://tvax1.sinaimg.cn/large/71d67353ly1gbmsxcd4hyj205c05cglz.jpg"><link rel="shortcut icon" href="https://tva1.sinaimg.cn/large/71d67353ly1gbmsxcg0p0j2020020t8n.jpg"><link rel="apple-touch-icon" href="https://tva1.sinaimg.cn/large/71d67353ly1gbmsxcg0p0j2020020t8n.jpg"><link rel="apple-touch-icon" sizes="72x72" href="https://tva1.sinaimg.cn/large/71d67353ly1gbmsxcg0p0j2020020t8n.jpg"><link rel="apple-touch-icon" sizes="144x144" href="https://tvax4.sinaimg.cn/large/71d67353ly1gbmsxciozpj204004074j.jpg"><link rel="apple-touch-icon" sizes="180x180" href="https://tva4.sinaimg.cn/large/71d67353ly1gbmsxcnvl4j2050050q3c.jpg"><title>JavaHub | A Lost Programmer In The World</title><link href="https://cdn.bootcss.com/font-awesome/5.4.1/css/all.css" rel="stylesheet"><link href="https://cdn.bootcss.com/mdui/0.4.1/css/mdui.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/common.css"><script src="https://cdn.bootcss.com/jquery/2.2.3/jquery.min.js"></script></head><body class="mdui-theme-primary-indigo mdui-theme-accent-indigo mdui-appbar-with-toolbar mdui-drawer-body-right"><div class="simple-appbar mdui-appbar-fixed"><div class="mdui-toolbar mdui-color-indigo"> <a href="javascript:;" class="mdui-btn mdui-btn-icon" id="simple-toggle-menu"><i class="mdui-icon material-icons">&#xe5d2;</i></a> <a href="/" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">&#xe88a;</i></a><div class="mdui-text-center simple-header-title-cls" id="simple-header-title"><small href="javascript:;" class="mdui-typo-title"></small></div><div class="mdui-toolbar-spacer"></div><div class="mdui-textfield mdui-textfield-expandable mdui-float-right simple-searchbar"> <button class="mdui-textfield-icon mdui-btn mdui-btn-icon"> <i class="mdui-icon material-icons">search</i></button> <input class="mdui-textfield-input" type="text" placeholder="Search" id="simple-input-search"> <button class="mdui-textfield-close mdui-btn mdui-btn-icon"> <i class="mdui-icon material-icons">close</i></button></div></div></div><div class="mdui-drawer mdui-drawer-full-height mdui-drawer-close mdui-color-white simple-menu-cls" id="simple-menu"> <a href="https://github.com/jiangdequan/hexo-theme-mdui" title="Fork me on GitHub" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#3f51b5;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style><div class="simple-menu-author"> <a href="/"><img class="mdui-img-circle" src="https://tva2.sinaimg.cn/large/71d67353ly1gbmsx8phl0j205k05kt9f.jpg"></a><div class="mdui-typo-title"> Jiang Dequan <a href="/atom.xml" title="RSS"><i class="mdui-icon material-icons">&#xe0e5;</i></a></div><p>jiangdequan1314@gmail.com</p></div><ul class="mdui-list mdui-typo"><li class="mdui-list-item mdui-ripple mdui-valign"> <a href="/"><i class="mdui-list-item-icon mdui-icon material-icons">&#xe88a;</i> <span>&nbsp;&nbsp;Home</span></a></li><li class="mdui-list-item mdui-ripple"> <a href="/archives"><i class="mdui-list-item-icon mdui-icon material-icons">&#xe865;</i> <span>&nbsp;&nbsp;Archives</span></a></li><li class="mdui-list-item mdui-ripple"> <a href="/categories"><i class="mdui-list-item-icon mdui-icon material-icons">&#xe164;</i> <span>&nbsp;&nbsp;Categories</span></a></li><li class="mdui-list-item mdui-ripple"> <a href="/tags"><i class="mdui-list-item-icon mdui-icon material-icons">&#xe54e;</i> <span>&nbsp;&nbsp;Tags</span></a></li><li class="mdui-list-item mdui-ripple"><a href="https://github.com/jiangdequan" target="_blank"><i class="mdui-list-item-icon mdui-icon fab fa-github"></i> <span>&nbsp;&nbsp;GitHub</span></a></li><li class="mdui-list-item mdui-ripple"> <a href="/about"><i class="mdui-list-item-icon mdui-icon material-icons">&#xe87c;</i> <span>&nbsp;&nbsp;About</span></a></li><li class="mdui-list-item mdui-ripple"> <i class="mdui-icon material-icons">&#xe8f4;</i><div class="mdui-list-item-content"><span id="busuanzi_container_site_pv"><span id="busuanzi_value_site_pv"></span></span></div> <i class="mdui-icon material-icons">&#xe851;</i><div class="mdui-list-item-content"><span id="busuanzi_container_site_uv"><span id="busuanzi_value_site_uv"></span></span></div></li><li class="mdui-list-item mdui-ripple"> <i class="mdui-icon material-icons">&#xe02f;</i><div class="mdui-list-item-content"> <span>共 10 篇</span></div> <i class="mdui-icon material-icons">&#xe24b;</i><div class="mdui-list-item-content"> <span>共 10k 字</span></div></li></ul></div><div class="mdui-container-fluid"><div class="simple-post-header"></div><div class="mdui-row" style="margin-top:-110px;z-index:9999"><div class="mdui-card mdui-col-md-7 mdui-col-offset-md-1 mdui-col-xs-12 mdui-shadow-12 simple-post-cls" id="simple-post"><div class="mdui-card-content mdui-typo"><h1>如何安装 Docker？</h1> <small class="mdui-typo-body-2-opacity mdui-m-b-1 simple-post-date">2018年11月14日</small><div class="mdui-center mdui-text-center"> <span id="busuanzi_container_page_pv"><del>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</del> 阅读量<span id="busuanzi_value_page_pv"></span> <del>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</del></span></div><br><div class="mdui-m-b-2 simple-content"><p>前前后后安装了多次 Docker，每次都会折腾很久，也会遇到很多问题，在这里简单记录下安装过程以及遇到的问题（在虚拟机中基于 CentOS 7，均在 root 账户下操作）。<br><a id="more"></a></p><h2 id="要求"><a href="#要求" class="headerlink" title="要求"></a>要求</h2><p>Docker 要求 CentOS 系统的内核版本高于 3.10，可使用如下指令查看系统内核版本<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -r</span><br></pre></td></tr></table></figure><p></p><h2 id="安装所需工具"><a href="#安装所需工具" class="headerlink" title="安装所需工具"></a>安装所需工具</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure><h2 id="添加-yum-国内镜像仓库"><a href="#添加-yum-国内镜像仓库" class="headerlink" title="添加 yum 国内镜像仓库"></a>添加 yum 国内镜像仓库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure><h2 id="更新缓存"><a href="#更新缓存" class="headerlink" title="更新缓存"></a>更新缓存</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum makecache fast</span><br></pre></td></tr></table></figure><h2 id="安装-Docker"><a href="#安装-Docker" class="headerlink" title="安装 Docker"></a>安装 Docker</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install docker-ce</span><br></pre></td></tr></table></figure><h2 id="启用服务"><a href="#启用服务" class="headerlink" title="启用服务"></a>启用服务</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure><h2 id="开机自动启动（可选）"><a href="#开机自动启动（可选）" class="headerlink" title="开机自动启动（可选）"></a>开机自动启动（可选）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable docker</span><br></pre></td></tr></table></figure><h2 id="添加-Docker-国内镜像"><a href="#添加-Docker-国内镜像" class="headerlink" title="添加 Docker 国内镜像"></a>添加 Docker 国内镜像</h2><p>由于国内网络原因，需要添加国内的镜像仓库，首先使用如下指令编辑该文件<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/docker/daemon.json</span><br></pre></td></tr></table></figure><p></p><p>添加如下内容：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://registry.docker-cn.com&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h2 id="刷新变化"><a href="#刷新变化" class="headerlink" title="刷新变化"></a>刷新变化</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure><h2 id="重启Docker"><a href="#重启Docker" class="headerlink" title="重启Docker"></a>重启Docker</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><h2 id="配置代理（可选）"><a href="#配置代理（可选）" class="headerlink" title="配置代理（可选）"></a>配置代理（可选）</h2><p>如果你的网络需要配置代理，请执行如下指令</p><h3 id="配置-http-代理"><a href="#配置-http-代理" class="headerlink" title="配置 http 代理"></a>配置 http 代理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/systemd/system/docker.service.d/http-proxy.conf</span><br></pre></td></tr></table></figure><p>添加下面的内容<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[Service] </span><br><span class="line">Environment=&quot;HTTP_PROXY=http://172.17.17.17:7777&quot; &quot;NO_PROXY=localhost,127.0.0.1,192.168.23.4&quot;</span><br></pre></td></tr></table></figure><p></p><p><em>NO_PROXY 用来配置不需要使用代理的地址</em></p><h3 id="配置-https-代理"><a href="#配置-https-代理" class="headerlink" title="配置 https 代理"></a>配置 https 代理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/systemd/system/docker.service.d/https-proxy.conf</span><br></pre></td></tr></table></figure><p>添加下面的内容<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[Service]</span><br><span class="line">Environment=&quot;HTTPS_PROXY=https://172.17.17.17:7777/&quot; &quot;NO_PROXY=localhost,127.0.0.1,192.168.23.4&quot;</span><br></pre></td></tr></table></figure><p></p><p><strong>PS：其中的 <em>172.17.17.17:7777</em> 根据实际情况进行修改，如果代理不支持 HTTPS 的话，需要把 <em><a href="https://172.17.17.17:7777/" target="_blank" rel="noopener">https://172.17.17.17:7777/</a></em> 中的 https 改成 http，否则回报 tls 的错误</strong></p><h2 id="配置-bip"><a href="#配置-bip" class="headerlink" title="配置 bip"></a>配置 bip</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/docker/daemon.json</span><br></pre></td></tr></table></figure><p>添加以下内容：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;bip&quot;: &quot;192.168.2.23/24&quot;</span><br></pre></td></tr></table></figure><p></p><p><strong>PS：修改的网段不要和虚拟机 IP，代理在同一网段，否则可能导致 SSH 无法连接虚拟机或者 Docker 无法上网等问题</strong></p><h2 id="其他问题"><a href="#其他问题" class="headerlink" title="其他问题"></a>其他问题</h2><h3 id="VBox-无界面启动-CentOS"><a href="#VBox-无界面启动-CentOS" class="headerlink" title="VBox 无界面启动 CentOS"></a>VBox 无界面启动 CentOS</h3><p>将以下指令保存为 bat 格式文件，双击即可<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@D:</span><br><span class="line">@cd D:\Program Files\Oracle\VirtualBox</span><br><span class="line">VBoxManage.exe startvm &quot;Centos7&quot; --type headless</span><br></pre></td></tr></table></figure><p></p><p>如果要关闭虚拟机，则采用如下的脚本即可<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@D:</span><br><span class="line">@cd D:\Program Files\Oracle\VirtualBox</span><br><span class="line">VBoxManage.exe controlvm &quot;Centos7&quot; poweroff</span><br></pre></td></tr></table></figure><p></p><p><strong>PS：其中 <em>D:\Program Files\Oracle\VirtualBox</em> 为 VBox 的安装目录，<em>Centos7</em> 为你需要启动的虚拟机名称</strong></p><h3 id="关闭-CentOS-7-的防火墙"><a href="#关闭-CentOS-7-的防火墙" class="headerlink" title="关闭 CentOS 7 的防火墙"></a>关闭 CentOS 7 的防火墙</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 停止 firewall</span><br><span class="line">systemctl stop firewalld.service</span><br><span class="line"></span><br><span class="line"># 禁止 firewall 开机启动</span><br><span class="line">systemctl disable firewalld.service</span><br></pre></td></tr></table></figure><p><strong>PS：由于是折腾用的虚拟机，无需使用防火墙，索性关闭了，避免其他问题</strong></p><h3 id="SSH-无法连接虚拟机"><a href="#SSH-无法连接虚拟机" class="headerlink" title="SSH 无法连接虚拟机"></a>SSH 无法连接虚拟机</h3><p>首先使用如下指令查看虚拟机的 IP<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip addr</span><br></pre></td></tr></table></figure><p></p><p>我们会得到以下信息，其中第二项（enp0s3，每个虚拟机网卡可能不太一样，这个值也不同）没有 inet 属性，导致无法连接<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN qlen 1</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: enp0s3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000</span><br><span class="line">    link/ether 08:00:27:08:9a:58 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">3: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN</span><br><span class="line">    link/ether 02:42:02:3d:70:d4 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.2.23/24 brd 192.168.2.255 scope global docker0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure><p></p><p>接下来我们使用如下指令修改该网卡的配置（CentOS 7 默认不启动网卡）<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-enp0s3</span><br></pre></td></tr></table></figure><p></p><p>将其中的 <strong>ONBOOT=no</strong> 修改为 <strong>ONBOOT=yes</strong>，重启网络服务<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service network restart</span><br></pre></td></tr></table></figure><p></p><p>再次使用 <em>ip addr</em> 查看 IP 地址信息，发现已经分配了 IP 地址信息了<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN qlen 1</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: enp0s3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000</span><br><span class="line">    link/ether 08:00:27:08:9a:58 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 10.0.2.15/24 brd 10.0.2.255 scope global dynamic enp0s3</span><br><span class="line">       valid_lft 86372sec preferred_lft 86372sec</span><br><span class="line">    inet6 fe80::9607:7c22:4201:a0dc/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">3: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN</span><br><span class="line">    link/ether 02:42:02:3d:70:d4 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.2.23/24 brd 192.168.2.255 scope global docker0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure><p></p><p>然后，再次使用 SSH 进行连接，发现可以连接使用了，就是连接有点慢</p><h3 id="SSH-连接慢"><a href="#SSH-连接慢" class="headerlink" title="SSH 连接慢"></a>SSH 连接慢</h3><p>使用如下指令修改 SSHD 配置<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><p></p><p>关闭DNS反向解析，修改 <em>UseDNS=no</em>，配置是注释掉的，但是其默认值是 yes<br>关闭 SERVER上 的 GSS 认证，修改 <em>GSSAPIAuthentication no</em></p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul><li><a href="https://blog.csdn.net/doiido/article/details/43793391" target="_blank" rel="noopener">CentOS/Linux 解决 SSH 连接慢</a></li><li><a href="https://blog.csdn.net/dancheren/article/details/73611878" target="_blank" rel="noopener">查看虚拟机里的Centos7的IP</a></li><li><a href="http://www.runoob.com/docker/centos-docker-install.html" target="_blank" rel="noopener">CentOS Docker 安装</a></li></ul></div><div class="mdui-m-y-5 mdui-typo"><div class="simple-content-end mdui-valign"> 最后修改时间: 2020年02月06日 16:10:46<br> 原始链接:</div></div><div class="mdui-center mdui-text-center simple-post-author"><p> <img class="mdui-img-circle" src="https://tva2.sinaimg.cn/large/71d67353ly1gbmsx8phl0j205k05kt9f.jpg"><br> <span class="mdui-typo-title">Jiang Dequan</span><br><br> <button class="mdui-btn mdui-ripple simple-donation-btn"> <i class="mdui-icon mdui-icon-left material-icons">&#xe8dc;</i>稀罕作者</button></p></div><div class="mdui-divider mdui-m-t-5 mdui-m-b-1"></div><div class="mdui-m-b-1"> <a href="/tags/微服务/" class="mdui-btn mdui-btn-dense mdui-hoverable mdui-color-green simple-article-tags">微服务</a> <a href="/tags/Docker/" class="mdui-btn mdui-btn-dense mdui-hoverable mdui-color-deep-purple simple-article-tags">Docker</a> <a href="/tags/SSH/" class="mdui-btn mdui-btn-dense mdui-hoverable mdui-color-orange simple-article-tags">SSH</a> <a href="/tags/代理/" class="mdui-btn mdui-btn-dense mdui-hoverable mdui-color-teal simple-article-tags">代理</a> <a href="/tags/CentOS-7/" class="mdui-btn mdui-btn-dense mdui-hoverable mdui-color-blue simple-article-tags">CentOS 7</a></div></div></div></div><div class="mdui-row mdui-p-y-1"><div class="mdui-col-md-4 mdui-col-offset-md-1 mdui-col-xs-6 mdui-text-left mdui-typo"> <a href="/posts/f29d8bb0/"><label class="label-post-prev">☜</label>如何搭建一个优雅的开发环境？</a></div><div class="mdui-col-md-3 mdui-col-xs-6 mdui-text-right mdui-typo"> <a href="/posts/8b0d9e7/">什么是微服务？<label class="label-post-next">☞</label></a></div></div><div class="mdui-drawer mdui-drawer-right simple-toc-cls" id="simple-toc"><nav class="post-toc-wrap post-toc-shrink" style="width:240px"><div class="mdui-card mdui-hoverable"><div class="mdui-card-header"><h3><i class="mdui-list-item-icon mdui-icon ion-ios-flame"></i> TOC</h3></div><div class="mdui-card-content" style="height:400px;overflow-y:auto;overflow-x:hidden"><ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#要求"><span class="post-toc-text">要求</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#安装所需工具"><span class="post-toc-text">安装所需工具</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#添加-yum-国内镜像仓库"><span class="post-toc-text">添加 yum 国内镜像仓库</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#更新缓存"><span class="post-toc-text">更新缓存</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#安装-Docker"><span class="post-toc-text">安装 Docker</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#启用服务"><span class="post-toc-text">启用服务</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#开机自动启动（可选）"><span class="post-toc-text">开机自动启动（可选）</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#添加-Docker-国内镜像"><span class="post-toc-text">添加 Docker 国内镜像</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#刷新变化"><span class="post-toc-text">刷新变化</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#重启Docker"><span class="post-toc-text">重启Docker</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#配置代理（可选）"><span class="post-toc-text">配置代理（可选）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#配置-http-代理"><span class="post-toc-text">配置 http 代理</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#配置-https-代理"><span class="post-toc-text">配置 https 代理</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#配置-bip"><span class="post-toc-text">配置 bip</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#其他问题"><span class="post-toc-text">其他问题</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#VBox-无界面启动-CentOS"><span class="post-toc-text">VBox 无界面启动 CentOS</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#关闭-CentOS-7-的防火墙"><span class="post-toc-text">关闭 CentOS 7 的防火墙</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#SSH-无法连接虚拟机"><span class="post-toc-text">SSH 无法连接虚拟机</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#SSH-连接慢"><span class="post-toc-text">SSH 连接慢</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#参考文档"><span class="post-toc-text">参考文档</span></a></li></ol></div></div></nav></div><div class="mdui-row mdui-p-t-1 mdui-p-b-3"><div class="mdui-col-md-7 mdui-col-offset-md-1 mdui-col-xs-12 mdui-col-offset-xs-0 mdui-shadow-12"><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div id="vcomments"></div><script>new Valine({el:"#vcomments",appId:"MVdi2Xnz6HbmG6W1A7I8CAC8-gzGzoHsz",appKey:"Rl17wHDK3kufdMOx19dojo1h",placeholder:"想对作者说点什么?"})</script></div></div><script src="/js/post.js"></script></div><footer class="footer mdui-color-theme mdui-text-center"><div class="mdui-typo"><p class="simple-footer-license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0)</a></p><p class="simple-footer-copyright"> Jiang Dequan &copy; 2013 - 2020 .Power by <a href="http://hexo.io/" target="_blank"><em>Hexo</em></a> Theme <a href="https://github.com/jiangdequan/hexo-theme-mdui" target="_blank"><em>mdui</em></a></p></div></footer> <button id="simple-scroll-btn" class="mdui-fab mdui-fab-fixed mdui-ripple mdui-fab-mini mdui-color-theme-accent simple-scroll-btn-cls"> <i class="mdui-icon material-icons">&#xe5d8;</i></button><div class="mdui-dialog simple-search-result-cls" id="simple-search-result"><div class="mdui-dialog-content"><div class="mdui-list"></div></div></div><script>$(document).ready(function(){var u,o=new mdui.Dialog("#simple-search-result"),e=algoliasearch("ARMI7PH3RU","6fd6458290f8f2087f2916caba9c8975").initIndex("prod_blog"),h=$("#simple-search-result .mdui-list");$("#simple-input-search").keyup(function(){if(13===event.keyCode){var p=$(this).val();u!==p?(h.empty(),""!==p&&e.search({query:p},function(e,i){if(e)throw e;u=p;var l=i.hits,s=i.nbHits,a=i.processingTimeMS;if(h.append('<label class="mdui-list-item mdui-ripple"><img src="/images/algolia_logo.svg" style="height:18px;"/>&nbsp;&nbsp;  '+s+" results found in "+a+" ms</label>"),null==l||""===l||l.length<1)o.open();else{for(var t=0;t<l.length;t++){var n=l[t].permalink;(n=n.replace("https://jiangdequan.github.io","")).startsWith("/")||(n="/"+n);var r=l[t]._highlightResult.title.value;h.append('<a href="'+n+'" class="mdui-list-item mdui-ripple">'+r+"</a>")}o.open()}})):o.open()}})})</script><script src="https://cdn.bootcss.com/mdui/0.4.1/js/mdui.min.js"></script><script async src="//cdn.busuanzi.ibruce.info/cdn/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script><script src="https://cdn.bootcss.com/algoliasearch/3.30.0/algoliasearchLite.min.js"></script><script src="/js/common.js"></script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?28f09eb40c03df56c14ea1736cf3ec3b";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-127646245-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-127646245-1")</script></body></html>